<!DOCTYPE html>
<html>
    
    <head>
        <script type="text/javascript" src="js/http.js"></script>
        <title>Eloquent JS 14</title>
    </head>
    
    <body>
        Evaluating the json file:
        <em><p id="output5"></p></em>
        Evaluating the lemon within the json file:
        <em><p id="output6"></p></em>
        
        <script type="text/javascript">
            var request = makeHttpObject();
            
            request.open("GET", "files/fruit.json", false);
            request.send(null);
            document.getElementById("output5").innerHTML = request.responseText;
            var data = eval("(" + request.responseText + ")");
            document.getElementById("output6").innerHTML = data["lemon"];
            
            
            //NOTE: for a reason I don't know, the onreadystatechange does not seem to work for the json file
            //I've left the code, but it does not work
            request.onreadystatechange = function() {
                if (request.readyState == 4)  {
                    var data = eval("(" + request.responseText + ")");
                    document.getElementById("output5").innerHTML = request.statusText;
                }
            };
            
        </script>
        
        
    </body>

</html>
